(this["webpackJsonpmag-app"]=this["webpackJsonpmag-app"]||[]).push([[0],{43:function(e,n,i){},45:function(e,n,i){},46:function(e,n,i){"use strict";i.r(n);var t,a,r,o,c=i(14),s=i(19),d=i.n(s),j=i(33),l=i.n(j),u=(i(43),function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,47)).then((function(n){var i=n.getCLS,t=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;i(e),t(e),a(e),r(e),o(e)}))}),w=i(9),f=i(36),b=i(37),v=function(e){var n=Object(s.useRef)(null),i=e.antialias,t=e.engineOptions,a=e.adaptToDeviceRatio,r=e.sceneOptions,o=e.onRender,d=(e.onSceneReady,Object(b.a)(e,["antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","onSceneReady"]));return Object(s.useEffect)((function(){if(n.current){var c=new w.d(n.current,i,t,a),s=new w.h(c,r);s.isReady()?e.onSceneReady(s):s.onReadyObservable.addOnce((function(n){return e.onSceneReady(n)})),c.runRenderLoop((function(){"function"===typeof o&&o(s),s.render()}));var d=function(){s.getEngine().resize()};return window&&window.addEventListener("resize",d),function(){s.getEngine().dispose(),window&&window.removeEventListener("resize",d)}}}),[n]),Object(c.jsx)("canvas",Object(f.a)({ref:n},d))},h=(i(45),i(34)),g=i(35),m=function(){function e(n,i){Object(h.a)(this,e),this.mesh=n,this.charge=i,this.isSelected=!1}return Object(g.a)(e,[{key:"name",get:function(){return this.mesh.name}},{key:"x",get:function(){return this.mesh.position.x}},{key:"y",get:function(){return this.mesh.position.y}},{key:"z",get:function(){return this.mesh.position.z}}]),e}(),p=!1,y=[],O=function(e){e.clearColor=new w.c(0,0,0,0);var n=e.getEngine().getRenderingCanvas(),i=new w.e(e);i.positionGizmoEnabled=!0,i.rotationGizmoEnabled=!1,i.scaleGizmoEnabled=!1,i.boundingBoxGizmoEnabled=!1;var c=new w.a("camera1",-.8,20,150,new w.j(0,5,-10),e);c.setTarget(w.j.Zero()),c.attachControl(n,!0),c.panningSensibility=100,document.getElementById("add-button-id").addEventListener("click",C);var s=50,d=w.f.CreateLines("bounds",[new w.j(-50,-50,s),new w.j(s,-50,s),new w.j(s,-50,-50),new w.j(s,-50,s),new w.j(s,s,s),new w.j(s,s,-50),new w.j(s,s,s),new w.j(-50,s,s),new w.j(-50,s,-50),new w.j(-50,s,s),new w.j(-50,-50,s),new w.j(-50,-50,-50),new w.j(-50,-50,-50),new w.j(s,-50,-50),new w.j(s,s,-50),new w.j(-50,s,-50),new w.j(-50,-50,-50)],e);d.color=new w.b(.5,.5,.5),d.isPickable=!1;var j=10,l=w.f.CreateLines("axisX",[new w.j.Zero,new w.j(j,0,0),new w.j(9.5,.5,0),new w.j(j,0,0),new w.j(9.5,-.5,0)],e);l.position=new w.j(-52,-52,-52),l.color=new w.b(1,0,0),l.isPickable=!1;var u=w.f.CreateLines("axisY",[new w.j.Zero,new w.j(0,j,0),new w.j(-.5,9.5,0),new w.j(0,j,0),new w.j(.5,9.5,0)],e);u.position=new w.j(-52,-52,-52),u.color=new w.b(0,1,0),u.isPickable=!1;var f=w.f.CreateLines("axisZ",[new w.j.Zero,new w.j(0,0,j),new w.j(0,-.5,9.5),new w.j(0,0,j),new w.j(0,.5,9.5)],e);f.position=new w.j(-52,-52,-52),f.color=new w.b(0,0,1),f.isPickable=!1,r=L(100,10),a=k(100,10),(o=w.g.CreateLineSystem("fieldLines",{colors:a,lines:r,updatable:!0},e)).isPickable=!1,(t=new w.i("shadelessMat",e)).emissiveColor=new w.b(1,1,1),y.push(R(e,1))},x=function(e){p&&(y.push(R(e,-1)),p=!1),S(r,a,y,100,10),o=w.g.CreateLineSystem("fieldLines",{colors:a,lines:r,instance:o},e)};var E=function(){return Object(c.jsx)("div",{className:"field-container",children:Object(c.jsx)(v,{antialias:!0,onSceneReady:O,onRender:x,className:"field-canvas"})})},R=function(e,n){var i="particle"+y.length,a=w.g.CreateSphere(i,{diameter:2},e,!0);return a.material=t,a.isPickable=!0,new m(a,n)},C=function(){p=!0},L=function(e,n){for(var i=[],t=0;t<n;t++)for(var a=t*(e/n)+e/n/2-e/2,r=0;r<n;r++)for(var o=r*(e/n)+e/n/2-e/2,c=0;c<n;c++){var s=c*(e/n)+e/n/2-e/2,d=[new w.j(s-1,a-1,o-1),new w.j(s,a,o),new w.j(s+1,a+1,o+1)];i[t*n*n+r*n+c]=d}return i},k=function(e,n){for(var i=[],t=0;t<n;t++)for(var a=0;a<n;a++)for(var r=0;r<n;r++){var o=[new w.c(0,.5,1,1),new w.c(0,.5,1,1),new w.c(1,1,1,1)];i[t*n*n+a*n+r]=o}return i},S=function(e,n,i,t,a){for(var r,o,c,s=1e7,d=0;d<a;d++)for(var j=d*(t/a)+t/a/2-t/2,l=0;l<a;l++)for(var u=l*(t/a)+t/a/2-t/2,w=0;w<a;w++){for(var f=w*(t/a)+t/a/2-t/2,b=[0,0,0],v=0;v<i.length;v++){var h=f-i[v].x,g=j-i[v].y,m=u-i[v].z,p=h*h+g*g+m*m,y=T(p),O=F(h,g,m,i[v].charge,p,y);O[0]=O[0]/s,O[1]=O[1]/s,O[2]=O[2]/s,O[0]=O[0]/2,O[1]=O[1]/2,O[2]=O[2]/2,b[0]+=O[0],b[1]+=O[1],b[2]+=O[2]}var x=d*a*a+l*a+w,E=e[x];E[0].x=f-b[0],E[0].y=j-b[1],E[0].z=u-b[2],E[2].x=f+b[0],E[2].y=j+b[1],E[2].z=u+b[2];var R=b[0],C=b[1],L=b[2],k=R*R+C*C+L*L,S=T(k),z=(r=k*S,o=.1,c=1,Math.max(o,Math.min(r,c))),P=n[x];P[0].a=z,P[1].a=z,P[2].a=z}},z=new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT),P=new Float32Array(z),N=new Uint32Array(z);function T(e){var n=.5*e;P[0]=e,N[0]=1597463007-(N[0]>>1);var i=P[0];return i*=1.5-n*i*i}var B=8987742438;function F(e,n,i,t,a,r){return[B*(e*t*r)/a,B*(n*t*r)/a,B*(i*t*r)/a]}l.a.render(Object(c.jsxs)(d.a.StrictMode,{children:[Object(c.jsx)(E,{}),Object(c.jsx)("div",{id:"ui-static",className:"ui-static-container",children:Object(c.jsx)("button",{id:"add-button-id",className:"add-button",children:"New Particle"})}),Object(c.jsxs)("div",{id:"ui-dynamic",className:"ui-dynamic-container",children:[Object(c.jsx)("label",{id:"dynamic-label-id",className:"dynamic-label",for:"charge-id",children:"Charge: "}),Object(c.jsx)("a",{children:"charge value"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"range",id:"charge-id",className:"charge",name:"charge",min:"-2",max:"2",step:"0.1"})]})]}),document.getElementById("root")),u()}},[[46,1,2]]]);
//# sourceMappingURL=main.9af89b60.chunk.js.map